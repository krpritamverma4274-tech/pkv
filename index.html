<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Govt Exam Portal | 100+ Tests</title>
    <style>
        :root { --primary: #1a73e8; --success: #28a745; --bg: #f8f9fa; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: #333; }

        /* Navigation Screens */
        .screen { min-height: 100vh; display: none; align-items: center; justify-content: center; flex-direction: column; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 900px; text-align: center; }
        
        /* Categories & Exams Grid */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; margin-top: 20px; width: 100%; }
        .card { background: #fff; padding: 25px; border: 2px solid #eee; border-radius: 10px; cursor: pointer; transition: 0.3s; }
        .card:hover { border-color: var(--primary); transform: translateY(-3px); background: #f0f7ff; }

        /* 1 to 100 Test List Grid */
        .test-list-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); gap: 10px; margin-top: 20px; max-height: 400px; overflow-y: auto; padding: 10px; border: 1px solid #ddd; border-radius: 8px; }
        .test-unit { padding: 15px 5px; background: #fff; border: 1px solid #ccc; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: bold; transition: 0.2s; }
        .test-unit:hover { background: var(--primary); color: white; border-color: var(--primary); }

        /* Quiz Interface */
        header { background: var(--primary); color: white; padding: 15px 5%; display: none; justify-content: space-between; align-items: center; position: sticky; top: 0; }
        .quiz-ui { display: none; max-width: 1100px; margin: 20px auto; gap: 20px; padding: 0 15px; }
        .question-box { flex: 2; background: white; padding: 30px; border-radius: 10px; min-height: 450px; text-align: left; }
        .opt-label { display: block; padding: 15px; border: 1px solid #ddd; margin: 10px 0; border-radius: 8px; cursor: pointer; transition: 0.2s; }
        .opt-label:hover { background: #f1f3f4; }

        /* Sidebar Palette */
        .palette { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
        .dot { width: 35px; height: 35px; border: 1px solid #ccc; display: flex; align-items: center; justify-content: center; border-radius: 5px; cursor: pointer; font-size: 12px; }
        .dot.done { background: var(--success); color: white; border: none; }
        .dot.active { border: 2px solid var(--primary); color: var(--primary); }

        .btn { padding: 12px 25px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; background: var(--primary); color: white; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        .my-rank { background: #fff3cd; font-weight: bold; }
    </style>
</head>
<body>

    <div id="scr-reg" class="screen" style="display: flex;">
        <div class="container" style="max-width: 400px;">
            <h2 style="color:var(--primary)">Candidate Login</h2>
            <input type="text" id="user-name" placeholder="‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç" style="width:100%; padding:12px; margin:20px 0; border:1px solid #ddd; border-radius:6px;">
            <button class="btn" style="width:100%" onclick="login()">Enter Portal</button>
        </div>
    </div>

    <div id="scr-cats" class="screen">
        <div class="container">
            <h2>Select Category</h2>
            <div class="grid">
                <div class="card" onclick="openExamList('railway')"><h3>üöÇ RAILWAY</h3><p>NTPC, ALP, JE, Group D</p></div>
                <div class="card" onclick="openExamList('ssc')"><h3>üèõÔ∏è SSC</h3><p>CGL, CHSL, MTS, GD</p></div>
                <div class="card" onclick="openExamList('police')"><h3>üëÆ POLICE</h3><p>SI & Constable Exams</p></div>
            </div>
        </div>
    </div>

    <div id="scr-exams" class="screen">
        <div class="container">
            <h2 id="cat-title">Exams</h2>
            <div class="grid" id="exam-items"></div>
            <button class="btn" style="margin-top:20px; background:#666" onclick="showScreen('scr-cats')">‚Üê Back</button>
        </div>
    </div>

    <div id="scr-test-series" class="screen">
        <div class="container">
            <h2 id="series-title">Test Series</h2>
            <p style="margin-bottom: 15px; color: #666;">Choose a Mock Test to start:</p>
            <div class="test-list-grid" id="test-grid"></div>
            <button class="btn" style="margin-top:20px; background:#666" onclick="showScreen('scr-exams')">‚Üê Back to Exams</button>
        </div>
    </div>

    <header id="quiz-head">
        <div id="active-test-info" style="font-weight:bold">Exam Name</div>
        <div id="timer" style="font-size:22px; font-weight:bold;">60:00</div>
        <button class="btn" style="background:var(--success)" onclick="submitFinal()">Submit Test</button>
    </header>

    <div class="quiz-ui" id="quiz-body">
        <div class="question-box">
            <h3 id="q-no">Question 1</h3>
            <p id="q-txt" style="margin:25px 0; font-size:19px; line-height:1.6;"></p>
            <div id="opt-container"></div>
            <div style="margin-top:40px; display:flex; justify-content:space-between; border-top:1px solid #eee; padding-top:20px;">
                <button class="btn" style="background:#eee; color:#333" onclick="goPrev()">Previous</button>
                <button class="btn" onclick="goNext()">Save & Next</button>
            </div>
        </div>
        <div class="sidebar" style="background:white; padding:20px; border-radius:10px; height:fit-content;">
            <p style="margin-bottom:15px; font-weight:bold;">Question Palette</p>
            <div class="palette" id="dot-palette"></div>
        </div>
    </div>

    <div id="scr-res" class="screen">
        <div class="container">
            <h2>Result Analysis</h2>
            <h1 id="score-display" style="font-size:65px; color:var(--primary); margin:20px 0;">0 / 0</h1>
            <h3>üèÜ Leaderboard</h3>
            <table id="rank-table">
                <thead><tr><th>Rank</th><th>Name</th><th>Score</th></tr></thead>
                <tbody id="rank-rows"></tbody>
            </table>
            <button class="btn" style="margin-top:25px;" onclick="location.reload()">Back to Dashboard</button>
        </div>
    </div>

    <script>
        const portalData = {
            railway: {
                title: "Railway Department",
                exams: {
                    ntpc: { name: "RRB NTPC", count: 100 },
                    alp: { name: "RRB ALP", count: 100 },
                    je: { name: "RRB JE", count: 100 },
                    gd: { name: "Group D", count: 100 }
                }
            },
            ssc: {
                title: "SSC Department",
                exams: {
                    cgl: { name: "SSC CGL", count: 100 },
                    gd: { name: "SSC GD", count: 100 },
                    mts: { name: "SSC MTS", count: 100 }
                }
            }
        };

        const mockQuestions = [
            { q: "Current Railway Minister of India?", o: ["Piyush Goyal", "Ashwini Vaishnaw", "Nitin Gadkari", "S. Jaishankar"], a: 1 },
            { q: "‚àö729 is equal to?", o: ["23", "27", "29", "31"], a: 1 },
            { q: "S.I. unit of Power is?", o: ["Joule", "Watt", "Newton", "Volt"], a: 1 }
        ];

        let userName = "", currentCatKey = "", currentExamKey = "";
        let qIdx = 0, answers = [], timeLeft = 3600, timerInt;

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById('quiz-head').style.display = 'none';
            document.getElementById('quiz-body').style.display = 'none';
            document.getElementById(id).style.display = 'flex';
        }

        function login() {
            userName = document.getElementById('user-name').value;
            if(!userName) return alert("Please enter your name!");
            showScreen('scr-cats');
        }

        function openExamList(catKey) {
            currentCatKey = catKey;
            document.getElementById('cat-title').innerText = portalData[catKey].title;
            let html = "";
            for(let key in portalData[catKey].exams) {
                html += `<div class="card" onclick="openTestSeries('${key}')"><h3>${portalData[catKey].exams[key].name}</h3><p>100 Full Tests</p></div>`;
            }
            document.getElementById('exam-items').innerHTML = html;
            showScreen('scr-exams');
        }

        function openTestSeries(examKey) {
            currentExamKey = examKey;
            let examName = portalData[currentCatKey].exams[examKey].name;
            document.getElementById('series-title').innerText = examName + " - Select Test";
            
            let html = "";
            for(let i=1; i<=100; i++) {
                html += `<div class="test-unit" onclick="launchTest(${i})">TEST ${i}</div>`;
            }
            document.getElementById('test-grid').innerHTML = html;
            showScreen('scr-test-series');
        }

        function launchTest(testNo) {
            answers = new Array(mockQuestions.length).fill(null);
            qIdx = 0;
            timeLeft = 3600;
            
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById('quiz-head').style.display = 'flex';
            document.getElementById('quiz-body').style.display = 'flex';
            document.getElementById('active-test-info').innerText = portalData[currentCatKey].exams[currentExamKey].name + " | Test #" + testNo;
            
            renderQ();
            timerInt = setInterval(updateTime, 1000);
        }

        function renderQ() {
            let q = mockQuestions[qIdx];
            document.getElementById('q-no').innerText = "Question " + (qIdx + 1);
            document.getElementById('q-txt').innerText = q.q;
            let html = "";
            q.o.forEach((opt, i) => {
                let isChecked = (answers[qIdx] === i) ? "checked" : "";
                html += `<label class="opt-label"><input type="radio" name="opt" onclick="saveSelection(${i})" ${isChecked}> ${opt}</label>`;
            });
            document.getElementById('opt-container').innerHTML = html;
            renderPalette();
        }

        function saveSelection(i) {
            answers[qIdx] = i;
            renderPalette();
        }

        function renderPalette() {
            let html = "";
            for(let i=0; i<mockQuestions.length; i++) {
                let cls = (i === qIdx) ? "dot active" : (answers[i] !== null ? "dot done" : "dot");
                html += `<div class="${cls}" onclick="jumpTo(${i})">${i+1}</div>`;
            }
            document.getElementById('dot-palette').innerHTML = html;
        }

        function jumpTo(i) { qIdx = i; renderQ(); }
        function goNext() { if(qIdx < mockQuestions.length - 1) { qIdx++; renderQ(); } }
        function goPrev() { if(qIdx > 0) { qIdx--; renderQ(); } }

        function updateTime() {
            timeLeft--;
            let m = Math.floor(timeLeft/60), s = timeLeft%60;
            document.getElementById('timer').innerText = `${m}:${s<10?'0'+s:s}`;
            if(timeLeft <= 0) submitFinal();
        }

        function submitFinal() {
            clearInterval(timerInt);
            let score = 0;
            mockQuestions.forEach((q, i) => { if(answers[i] === q.a) score++; });

            // Ranking (LocalStorage)
            let key = `rank_${currentExamKey}`;
            let board = JSON.parse(localStorage.getItem(key) || "[]");
            board.push({ n: userName, s: score });
            board.sort((a,b) => b.s - a.s);
            localStorage.setItem(key, JSON.stringify(board));

            showScreen('scr-res');
            document.getElementById('score-display').innerText = `${score} / ${mockQuestions.length}`;
            
            let rHtml = "";
            board.slice(0, 10).forEach((entry, i) => {
                let cls = (entry.n === userName && entry.s === score) ? "class='my-rank'" : "";
                rHtml += `<tr ${cls}><td>${i+1}</td><td>${entry.n}</td><td>${entry.s}</td></tr>`;
            });
            document.getElementById('rank-rows').innerHTML = rHtml;
        }
    </script>
</body>
</html>