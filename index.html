<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Govt Exam Pro - All India Mock Test</title>
    <style>
        :root { --blue: #1a73e8; --green: #2ecc71; --red: #e74c3c; --bg: #f8f9fa; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: #333; }

        /* Generic Layout */
        .screen { min-height: 100vh; display: none; align-items: center; justify-content: center; padding: 20px; flex-direction: column; }
        .box { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 100%; max-width: 800px; text-align: center; }
        .btn { padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-blue { background: var(--blue); color: white; }
        
        /* Grid Selection */
        .grid-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px; }
        .card { padding: 25px; border: 2px solid #eee; border-radius: 12px; cursor: pointer; transition: 0.3s; background: white; text-align: center; }
        .card:hover { border-color: var(--blue); transform: translateY(-5px); box-shadow: 0 5px 15px rgba(26, 115, 232, 0.2); }
        .card i { font-size: 40px; color: var(--blue); display: block; margin-bottom: 10px; }

        /* Quiz UI */
        header { background: var(--blue); color: white; padding: 12px 5%; display: none; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        .main-container { display: none; max-width: 1200px; margin: 20px auto; gap: 20px; padding: 0 15px; }
        .quiz-card { flex: 2; background: white; padding: 30px; border-radius: 12px; min-height: 500px; }
        .sidebar { flex: 0.8; background: white; padding: 20px; border-radius: 12px; height: fit-content; position: sticky; top: 80px; }
        
        /* Options */
        .option-item { display: flex; align-items: center; padding: 15px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 12px; cursor: pointer; }
        .option-item input { margin-right: 15px; }
        .correct-ans { background: #d4edda !important; border-color: #2c974b !important; }
        .wrong-ans { background: #f8d7da !important; border-color: #cb2431 !important; }

        /* Palette */
        .palette { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin-top: 15px; }
        .q-dot { width: 35px; height: 35px; border: 1px solid #ccc; display: flex; align-items: center; justify-content: center; border-radius: 5px; cursor: pointer; font-size: 12px; }
        .q-dot.active { border: 2px solid var(--blue); color: var(--blue); }
        .q-dot.done { background: var(--green); color: white; border: none; }

        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #eee; padding: 10px; text-align: center; }
        .my-rank { background: #fff3cd !important; font-weight: bold; }
    </style>
</head>
<body>

    <div id="reg-screen" class="screen" style="display: flex;">
        <div class="box" style="max-width: 450px;">
            <h1 style="color: var(--blue);">Student Portal</h1>
            <p style="margin-bottom: 25px; color: #666;">‡§Ö‡§™‡§®‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</p>
            <input type="text" id="user-name" placeholder="‡§™‡•Å‡§∞‡§æ ‡§®‡§æ‡§Æ (Full Name)" style="width:100%; padding:15px; margin-bottom:15px; border:1px solid #ddd; border-radius:8px;">
            <input type="email" id="user-email" placeholder="‡§à‡§Æ‡•á‡§≤ ‡§Ü‡§à‡§°‡•Ä (Email)" style="width:100%; padding:15px; margin-bottom:20px; border:1px solid #ddd; border-radius:8px;">
            <button class="btn btn-blue" style="width:100%;" onclick="startRegistration()">‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§® ‡§ï‡§∞‡•á‡§Ç</button>
        </div>
    </div>

    <div id="main-cat-screen" class="screen">
        <div class="box">
            <h2>‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡•Ä ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç (Choose Category)</h2>
            <div class="grid-container">
                <div class="card" onclick="showSubCategory('railway')">üöÇ<h3>RAILWAY</h3><p>NTPC, ALP, JE, Group D</p></div>
                <div class="card" onclick="showSubCategory('ssc')">üèõÔ∏è<h3>SSC</h3><p>CGL, CHSL, MTS, GD</p></div>
                <div class="card" onclick="showSubCategory('banking')">üí∞<h3>BANKING</h3><p>IBPS PO, Clerk, SBI</p></div>
                <div class="card" onclick="showSubCategory('state')">üö©<h3>STATE EXAMS</h3><p>Police, Patwari, SI</p></div>
            </div>
        </div>
    </div>

    <div id="sub-cat-screen" class="screen">
        <div class="box">
            <button onclick="backToMain()" style="float: left; background: none; border: none; color: var(--blue); cursor: pointer; font-weight: bold;">‚Üê Back</button>
            <h2 id="sub-title">Select Specific Exam</h2>
            <div class="grid-container" id="exam-list"></div>
        </div>
    </div>

    <header id="quiz-header">
        <div id="exam-info" style="font-weight: bold;">Exam: </div>
        <div style="display:flex; gap:15px;">
            <select id="lang-select" onchange="changeLang()"><option value="en">English</option><option value="hi">Hindi</option></select>
            <button class="btn" style="background:var(--green); color:white; padding:5px 15px;" onclick="confirmFinish()">Finish</button>
        </div>
    </header>

    <div class="main-container" id="quiz-area">
        <div class="quiz-card">
            <div style="display:flex; justify-content:space-between; border-bottom:1px solid #eee; padding-bottom:10px;">
                <h3 id="q-num">Q1</h3>
                <span id="q-cat" style="color:var(--blue); font-size:12px; font-weight:bold;">Section</span>
            </div>
            <p id="q-text" style="font-size: 19px; margin: 25px 0; line-height: 1.5;"></p>
            <div id="options-box"></div>
            <div style="margin-top:30px; display:flex; justify-content:space-between;">
                <button class="btn" style="background:#eee;" onclick="prevQ()">Back</button>
                <button class="btn btn-blue" onclick="nextQ()">Next</button>
            </div>
        </div>
        <div class="sidebar">
            <h2 id="timer" style="color:var(--red); text-align:center; font-size:30px;">60:00</h2>
            <div class="palette" id="palette"></div>
        </div>
    </div>

    <div id="result-screen" class="screen">
        <div class="box">
            <h2>Result Analysis</h2>
            <h1 id="score-display" style="font-size: 50px; color: var(--blue); margin: 15px 0;">0/0</h1>
            <div style="display:flex; justify-content:space-around; margin-bottom:20px;">
                <div style="color:var(--green)"><strong>Strong:</strong> <span id="strong-cat"></span></div>
                <div style="color:var(--red)"><strong>Weak:</strong> <span id="weak-cat"></span></div>
            </div>
            <h3>Leaderboard</h3>
            <table class="rank-table">
                <thead><tr><th>Rank</th><th>Name</th><th>Score</th></tr></thead>
                <tbody id="rank-body"></tbody>
            </table>
            <button class="btn btn-blue" style="margin-top:20px;" onclick="location.reload()">Take Another Test</button>
        </div>
    </div>

    <script>
        // --- DATABASE ---
        const database = {
            railway: {
                title: "Railway Exams",
                exams: {
                    "r_ntpc": { name: "NTPC (CBT-1)", questions: [{cat:"Math", en:{q:"‚àö144?", opt:["10","11","12","13"], fact:"12x12=144"}, hi:{q:"‚àö144 ‡§ï‡§æ ‡§Æ‡§æ‡§®?", opt:["10","11","12","13"], fact:"12x12=144"}, ans:2}] },
                    "r_alp": { name: "ALP & Technician", questions: [{cat:"Science", en:{q:"Unit of Force?", opt:["Watt","Newton","Joule","Volt"], fact:"Newton (N)"}, hi:{q:"‡§¨‡§≤ ‡§ï‡§æ ‡§Æ‡§æ‡§§‡•ç‡§∞‡§ï?", opt:["‡§µ‡§æ‡§ü","‡§®‡•ç‡§Ø‡•Ç‡§ü‡§®","‡§ú‡•Ç‡§≤","‡§µ‡•ã‡§≤‡•ç‡§ü"], fact:"‡§®‡•ç‡§Ø‡•Ç‡§ü‡§®"}, ans:1}] },
                    "r_je": { name: "RRB JE", questions: [{cat:"Technical", en:{q:"Hertz is unit of?", opt:["Force","Speed","Frequency","Heat"], fact:"Unit of Frequency"}, hi:{q:"‡§π‡§∞‡•ç‡§ü‡•ç‡§ú‡§º ‡§ï‡§ø‡§∏‡§ï‡•Ä ‡§á‡§ï‡§æ‡§à ‡§π‡•à?", opt:["‡§¨‡§≤","‡§ó‡§§‡§ø","‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡§ø","‡§ä‡§∑‡•ç‡§Æ‡§æ"], fact:"‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§ï‡•Ä ‡§á‡§ï‡§æ‡§à"}, ans:2}] },
                    "r_gd": { name: "Group D", questions: [{cat:"GK", en:{q:"Capital of India?", opt:["Mumbai","Delhi","Kolkata","Chennai"], fact:"New Delhi"}, hi:{q:"‡§≠‡§æ‡§∞‡§§ ‡§ï‡•Ä ‡§∞‡§æ‡§ú‡§ß‡§æ‡§®‡•Ä?", opt:["‡§Æ‡•Å‡§Ç‡§¨‡§à","‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä","‡§ï‡•ã‡§≤‡§ï‡§æ‡§§‡§æ","‡§ö‡•á‡§®‡•ç‡§®‡§à"], fact:"‡§®‡§à ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä"}, ans:1}] }
                }
            },
            ssc: {
                title: "SSC Exams",
                exams: {
                    "s_cgl": { name: "SSC CGL", questions: [{cat:"English", en:{q:"Synonym of 'Tiny'?", opt:["Large","Huge","Small","Heavy"], fact:"Tiny means very small"}, hi:{q:"'Tiny' ‡§ï‡§æ ‡§™‡§∞‡•ç‡§Ø‡§æ‡§Ø‡§µ‡§æ‡§ö‡•Ä?", opt:["‡§µ‡§ø‡§∂‡§æ‡§≤","‡§¨‡•ú‡§æ","‡§õ‡•ã‡§ü‡§æ","‡§≠‡§æ‡§∞‡•Ä"], fact:"Tiny ‡§ï‡§æ ‡§Ö‡§∞‡•ç‡§• ‡§õ‡•ã‡§ü‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à"}, ans:2}] },
                    "s_gd": { name: "SSC GD", questions: [{cat:"GK", en:{q:"National Animal?", opt:["Lion","Tiger","Elephant","Cow"], fact:"Royal Bengal Tiger"}, hi:{q:"‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§™‡§∂‡•Å?", opt:["‡§∂‡•á‡§∞","‡§¨‡§æ‡§ò","‡§π‡§æ‡§•‡•Ä","‡§ó‡§æ‡§Ø"], fact:"‡§¨‡§æ‡§ò"}, ans:1}] },
                    "s_mts": { name: "SSC MTS", questions: [{cat:"Math", en:{q:"2+2*2?", opt:["8","6","4","2"], fact:"BODMAS rule: 2+(2*2)=6"}, hi:{q:"2+2*2?", opt:["8","6","4","2"], fact:"BODMAS ‡§®‡§ø‡§Ø‡§Æ: 2+(2*2)=6"}, ans:1}] }
                }
            }
        };

        let currentUser = {};
        let currentExam = null;
        let currentIdx = 0;
        let userAnswers = [];
        let currentLang = "en";
        let timeLeft = 3600;
        let timerFunc;

        function startRegistration() {
            const name = document.getElementById('user-name').value;
            if(!name) return alert("Please enter name");
            currentUser.name = name;
            document.getElementById('reg-screen').style.display = 'none';
            document.getElementById('main-cat-screen').style.display = 'flex';
        }

        function showSubCategory(catKey) {
            const data = database[catKey];
            document.getElementById('sub-title').innerText = data.title;
            let html = "";
            for(let key in data.exams) {
                html += `<div class="card" onclick="initTest('${catKey}', '${key}')"><h3>${data.exams[key].name}</h3><p>Mock Test Live</p></div>`;
            }
            document.getElementById('exam-list').innerHTML = html;
            document.getElementById('main-cat-screen').style.display = 'none';
            document.getElementById('sub-cat-screen').style.display = 'flex';
        }

        function backToMain() {
            document.getElementById('sub-cat-screen').style.display = 'none';
            document.getElementById('main-cat-screen').style.display = 'flex';
        }

        function initTest(catKey, examKey) {
            currentExam = database[catKey].exams[examKey];
            currentExam.id = examKey;
            userAnswers = new Array(currentExam.questions.length).fill(null);
            document.getElementById('sub-cat-screen').style.display = 'none';
            document.getElementById('quiz-header').style.display = 'flex';
            document.getElementById('quiz-area').style.display = 'flex';
            document.getElementById('exam-info').innerText = "Exam: " + currentExam.name;
            loadQ();
            timerFunc = setInterval(updateTimer, 1000);
        }

        function loadQ() {
            let q = currentExam.questions[currentIdx];
            document.getElementById('q-num').innerText = "Q" + (currentIdx + 1);
            document.getElementById('q-cat').innerText = q.cat;
            document.getElementById('q-text').innerText = q[currentLang].q;
            let html = "";
            q[currentLang].opt.forEach((o, i) => {
                let checked = userAnswers[currentIdx] === i ? "checked" : "";
                html += `<label class="option-item"><input type="radio" name="opt" onclick="userAnswers[${currentIdx}]=${i};updatePalette()" ${checked}> ${o}</label>`;
            });
            document.getElementById('options-box').innerHTML = html;
            updatePalette();
        }

        function nextQ() { if(currentIdx < currentExam.questions.length-1) { currentIdx++; loadQ(); } }
        function prevQ() { if(currentIdx > 0) { currentIdx--; loadQ(); } }
        function updatePalette() {
            let h = "";
            for(let i=0; i<currentExam.questions.length; i++) {
                let c = (i === currentIdx) ? "active" : (userAnswers[i] !== null ? "done" : "");
                h += `<div class="q-dot ${c}" onclick="currentIdx=${i};loadQ()">${i+1}</div>`;
            }
            document.getElementById('palette').innerHTML = h;
        }

        function updateTimer() {
            if(timeLeft <= 0) submitTest();
            let m = Math.floor(timeLeft/60), s = timeLeft%60;
            document.getElementById('timer').innerText = `${m}:${s<10?'0'+s:s}`;
            timeLeft--;
        }

        function confirmFinish() { if(confirm("Submit Test?")) submitTest(); }

        function submitTest() {
            clearInterval(timerFunc);
            let score = 0;
            let stats = {};
            currentExam.questions.forEach((q, i) => {
                if(!stats[q.cat]) stats[q.cat] = {c:0, t:0};
                stats[q.cat].t++;
                if(userAnswers[i] === q.ans) { score++; stats[q.cat].c++; }
            });

            // Save Leaderboard
            let history = JSON.parse(localStorage.getItem('rank_'+currentExam.id) || "[]");
            history.push({ name: currentUser.name, score: score });
            history.sort((a,b) => b.score - a.score);
            localStorage.setItem('rank_'+currentExam.id, JSON.stringify(history));

            // Result UI
            document.getElementById('quiz-area').style.display = 'none';
            document.getElementById('quiz-header').style.display = 'none';
            document.getElementById('result-screen').style.display = 'flex';
            document.getElementById('score-display').innerText = `${score} / ${currentExam.questions.length}`;
            
            let sortedCats = Object.keys(stats).sort((a,b) => (stats[b].c/stats[b].t) - (stats[a].c/stats[a].t));
            document.getElementById('strong-cat').innerText = sortedCats[0] || "N/A";
            document.getElementById('weak-cat').innerText = sortedCats[sortedCats.length-1] || "N/A";

            let rankHtml = "";
            history.slice(0,10).forEach((e, i) => {
                let isMe = (e.name === currentUser.name && e.score === score) ? "class='my-rank'" : "";
                rankHtml += `<tr ${isMe}><td>${i+1}</td><td>${e.name}</td><td>${e.score}</td></tr>`;
            });
            document.getElementById('rank-body').innerHTML = rankHtml;
        }

        function changeLang() { currentLang = document.getElementById('lang-select').value; loadQ(); }
    </script>
</body>
</html>